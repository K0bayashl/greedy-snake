# Claude Code SubAgent é…ç½®æŒ‡å—

## ğŸ“Œ ä»€ä¹ˆæ˜¯ SubAgentï¼Ÿ

SubAgent æ˜¯å…·æœ‰**ç‹¬ç«‹ä¸Šä¸‹æ–‡**å’Œ**ç‰¹å®šèŒè´£**çš„ AI ä»£ç†ã€‚å®ƒä»¬å°±åƒæ‹¥æœ‰ä¸“é—¨æŠ€èƒ½çš„åŠ©æ‰‹ï¼Œå„è‡ªä¸“æ³¨äºä¸åŒé¢†åŸŸçš„å·¥ä½œã€‚

### æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| ğŸ§  **ç‹¬ç«‹ä¸Šä¸‹æ–‡** | æ¯ä¸ª Agent æœ‰ç‹¬ç«‹çš„è®°å¿†å’Œæ€è€ƒè¿‡ç¨‹ |
| ğŸ¯ **ä¸“ä¸šåˆ†å·¥** | å¯ä¸“æ³¨äºç‰¹å®šä»»åŠ¡ç±»å‹ |
| ğŸ”’ **æƒé™æ§åˆ¶** | åªèƒ½è®¿é—®é…ç½®å…è®¸çš„å·¥å…· |
| ğŸ“‹ **è‡ªå®šä¹‰è¡Œä¸º** | é€šè¿‡ç³»ç»Ÿæç¤ºè¯å®šåˆ¶å·¥ä½œæ–¹å¼ |

---

## ğŸ”§ é…ç½®æ–‡ä»¶ä½ç½®

SubAgent å®šä¹‰ä¸º Markdown æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨ä»¥ä¸‹ä½ç½®ä¹‹ä¸€ï¼š

```
é¡¹ç›®çº§ï¼š{project}/.claude/agents/{name}.md
ç”¨æˆ·çº§ï¼š~/.claude/agents/{name}.md
```

**ä¼˜å…ˆçº§**ï¼šé¡¹ç›®çº§ Agent ä¼šè¦†ç›–ç”¨æˆ·çº§åŒå Agent

---

## ğŸ“ æ–‡ä»¶æ ¼å¼

### åŸºæœ¬ç»“æ„

```markdown
---
name: my-agent
description: æˆ‘çš„ä»£ç† - ç®€çŸ­æè¿°
tools:
  - Read
  - Edit
  - Write
permissionMode: readonly
model: sonnet
---

# ä»£ç†æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰

æ›´è¯¦ç»†çš„ç³»ç»Ÿæç¤ºè¯å†…å®¹...
```

### YAML å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `name` | string | âœ… | Agent æ ‡è¯†ç¬¦ï¼Œè°ƒç”¨æ—¶ä½¿ç”¨ |
| `description` | string | âœ… | ç®€çŸ­æè¿°ï¼Œç”¨äº Agent è¯†åˆ« |
| `tools` | array | âœ… | å…è®¸ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨ |
| `permissionMode` | string | âŒ | `readonly` æˆ– `full`ï¼ˆé»˜è®¤ fullï¼‰ |
| `model` | string | âŒ | `sonnet`/`opus`/`haiku`ï¼ˆé»˜è®¤ sonnetï¼‰ |

---

## ğŸ› ï¸ å¯ç”¨çš„å·¥å…·

### å·¥å…·åˆ—è¡¨

| å·¥å…· | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `Read` | è¯»å–æ–‡ä»¶ | åªè¯»ä»»åŠ¡ |
| `Edit` | ç¼–è¾‘æ–‡ä»¶ | ä¿®æ”¹ä»£ç  |
| `Write` | å†™å…¥æ–‡ä»¶ | åˆ›å»ºæ–°æ–‡ä»¶ |
| `Glob` | æ–‡ä»¶æœç´¢ | æŸ¥æ‰¾æ–‡ä»¶ |
| `Grep` | å†…å®¹æœç´¢ | æŸ¥æ‰¾ä»£ç  |
| `Bash` | æ‰§è¡Œå‘½ä»¤ | è¿è¡Œè„šæœ¬/æµ‹è¯• |
| `Task` | è°ƒç”¨å…¶ä»– Agent | å§”æ´¾ä»»åŠ¡ |
| `TodoWrite` | ä»»åŠ¡ç®¡ç† | è·Ÿè¸ªè¿›åº¦ |

### æƒé™æ¨¡å¼

| æ¨¡å¼ | è¯´æ˜ |
|------|------|
| `readonly` | åªè¯»å·¥å…·ï¼ˆRead, Glob, Grepï¼‰ |
| `full` | æ‰€æœ‰å·¥å…· |

---

## ğŸ¯ å†…ç½® Agent ç±»å‹

### 1. Explore - ä»£ç æ¢ç´¢ä¸“å®¶

**ç”¨é€”**ï¼šå¿«é€Ÿæ¢ç´¢ä»£ç åº“ç»“æ„ã€æŸ¥æ‰¾æ–‡ä»¶ã€æœç´¢åŠŸèƒ½

**å·¥å…·æƒé™**ï¼šé™¤ Taskã€ExitPlanMode å¤–çš„æ‰€æœ‰å·¥å…·

**è°ƒç”¨æ–¹å¼**ï¼š
```
Task(subagent_type="Explore", prompt="æ‰¾å‡ºæ‰€æœ‰å¤„ç†ç”¨æˆ·è¾“å…¥çš„æ–‡ä»¶")
```

**é€‚ç”¨åœºæ™¯**ï¼š
- äº†è§£æ–°é¡¹ç›®ç»“æ„
- æŸ¥æ‰¾ç‰¹å®šåŠŸèƒ½çš„å®ç°ä½ç½®
- æœç´¢ä»£ç æ¨¡å¼

---

### 2. Plan - æ–¹æ¡ˆè§„åˆ’ä¸“å®¶

**ç”¨é€”**ï¼šåˆ¶å®šå®æ–½è®¡åˆ’ã€åˆ†æéœ€æ±‚ã€è®¾è®¡æ¶æ„

**å·¥å…·æƒé™**ï¼šé™¤ Taskã€ExitPlanMode å¤–çš„æ‰€æœ‰å·¥å…·

**è°ƒç”¨æ–¹å¼**ï¼š
```
Task(subagent_type="Plan", prompt="è§„åˆ’æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½")
```

**é€‚ç”¨åœºæ™¯**ï¼š
- æ–°åŠŸèƒ½çš„å®æ–½è®¡åˆ’
- ä»£ç é‡æ„æ–¹æ¡ˆ
- æ¶æ„è®¾è®¡å†³ç­–

---

### 3. Bash - å‘½ä»¤æ‰§è¡Œä¸“å®¶

**ç”¨é€”**ï¼šæ‰§è¡Œå¤æ‚ Shell å‘½ä»¤ã€è„šæœ¬æ“ä½œ

**å·¥å…·æƒé™**ï¼šä»… Bash

**è°ƒç”¨æ–¹å¼**ï¼š
```
Task(subagent_type="Bash", prompt="æ‰¹é‡é‡å‘½åæ–‡ä»¶")
```

**é€‚ç”¨åœºæ™¯**ï¼š
- Git æ‰¹é‡æ“ä½œ
- æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
- æ„å»ºå’Œéƒ¨ç½²

---

### 4. general-purpose - é€šç”¨ä»£ç†

**ç”¨é€”**ï¼šå¤„ç†å„ç§é€šç”¨ä»»åŠ¡

**å·¥å…·æƒé™**ï¼šæ‰€æœ‰å·¥å…·

**è°ƒç”¨æ–¹å¼**ï¼š
```
Task(subagent_type="general-purpose", prompt="ç ”ç©¶å¹¶å®ç°...")
```

**é€‚ç”¨åœºæ™¯**ï¼š
- éœ€è¦å…¨å·¥å…·è®¿é—®çš„ä»»åŠ¡
- å¤æ‚çš„å¤šæ­¥éª¤æ“ä½œ
- ä¸ç¡®å®šç”¨å“ªä¸ª Agent æ—¶

---

### 5. claude-code-guide - å¸®åŠ©åŠ©æ‰‹

**ç”¨é€”**ï¼šè§£ç­” Claude Code ä½¿ç”¨é—®é¢˜

**å·¥å…·æƒé™**ï¼šGlob, Grep, Read, WebFetch, WebSearch

**è°ƒç”¨æ–¹å¼**ï¼š
```
Task(subagent_type="claude-code-guide", prompt="å¦‚ä½•é…ç½® hooks?")
```

**é€‚ç”¨åœºæ™¯**ï¼š
- åŠŸèƒ½ä½¿ç”¨å’¨è¯¢
- é…ç½®é—®é¢˜
- æœ€ä½³å®è·µ

---

## ğŸš€ åˆ›å»ºè‡ªå®šä¹‰ Agent

### æ­¥éª¤ 1ï¼šç¡®å®šéœ€æ±‚

æ˜ç¡®ä½ è¦åˆ›å»ºçš„ Agentï¼š
- **èŒè´£**ï¼šå®ƒè´Ÿè´£ä»€ä¹ˆï¼Ÿ
- **å·¥å…·**ï¼šå®ƒéœ€è¦å“ªäº›å·¥å…·ï¼Ÿ
- **æƒé™**ï¼šåªè¯»è¿˜æ˜¯å¯å†™ï¼Ÿ

### æ­¥éª¤ 2ï¼šåˆ›å»ºæ–‡ä»¶

åœ¨ `.claude/agents/` ç›®å½•åˆ›å»º `{name}.md` æ–‡ä»¶ï¼š

```bash
mkdir -p .claude/agents
```

### æ­¥éª¤ 3ï¼šç¼–å†™é…ç½®

ç¤ºä¾‹ - ä»£ç å®¡æŸ¥å®˜ï¼š

```markdown
---
name: reviewer
description: ä»£ç å®¡æŸ¥å®˜ - æ£€æŸ¥ä»£ç è´¨é‡ã€å‘ç°æ½œåœ¨é—®é¢˜
tools:
  - Read
  - Grep
  - Glob
permissionMode: readonly
model: sonnet
---

# ä»£ç å®¡æŸ¥å®˜

ä½ æ˜¯ä¸€ä½ä¸“æ³¨äºä»£ç è´¨é‡å®¡æŸ¥çš„ä¸“å®¶ã€‚

## å®¡æŸ¥è¦ç‚¹
- ä»£ç å¯è¯»æ€§
- å®‰å…¨æ¼æ´
- æ€§èƒ½é—®é¢˜
- ä»£ç è§„èŒƒ

## è¾“å‡ºæ ¼å¼
1. ä¼˜ç‚¹æ€»ç»“
2. é—®é¢˜æ¸…å•ï¼ˆé«˜/ä¸­/ä½ä¸¥é‡ç¨‹åº¦ï¼‰
3. æ”¹è¿›å»ºè®®
```

### æ­¥éª¤ 4ï¼šé‡å¯ Claude Code

**é‡è¦**ï¼šåˆ›å»ºæˆ–ä¿®æ”¹ Agent åï¼Œéœ€è¦é‡å¯ Claude Code æ‰èƒ½ç”Ÿæ•ˆã€‚

---

## ğŸ“ è°ƒç”¨ Agent

### æ–¹å¼ 1ï¼šè‡ªç„¶è¯­è¨€

ç›´æ¥åœ¨å¯¹è¯ä¸­æè¿°ï¼š

```
"è®© reviewer æ£€æŸ¥ä¸€ä¸‹ game.js"
"è¯· developer æ·»åŠ é“å…·åŠŸèƒ½"
```

### æ–¹å¼ 2ï¼šTask å·¥å…·

ç²¾ç¡®è°ƒç”¨ï¼š

```
Task(
  subagent_type="reviewer",
  prompt="å®¡æŸ¥ game.js æ–‡ä»¶"
)
```

### æ–¹å¼ 3ï¼šæ¢å¤ä¹‹å‰çš„ä¼šè¯

ä½¿ç”¨è¿”å›çš„ `agentId` æ¢å¤ï¼š

```
Task(
  resume="ae93f7e",
  prompt="ç»§ç»­å®Œæˆä¹‹å‰çš„ä»»åŠ¡"
)
```

---

## ğŸ§¬ ä¸Šä¸‹æ–‡éš”ç¦»æœºåˆ¶

### å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸»å¯¹è¯        â”‚
â”‚                 â”‚
â”‚  "è®© dev åš X"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  developer Agent â”‚  â† ç‹¬ç«‹ä¸Šä¸‹æ–‡
â”‚                 â”‚  â† ç‹¬ç«‹ token é¢„ç®—
â”‚  å¤„ç†ä»»åŠ¡...    â”‚  â† ä¸“ç”¨ç³»ç»Ÿæç¤ºè¯
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è¿”å›ç»“æœ      â”‚
â”‚   ç»™ä¸»å¯¹è¯      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### éš”ç¦»ç‰¹æ€§

| ç‰¹æ€§ | ä¸»å¯¹è¯ | SubAgent |
|------|--------|----------|
| ä¸Šä¸‹æ–‡ | å…±äº« | ç‹¬ç«‹ |
| è®°å¿† | æœ‰ | æ— è·¨ä»»åŠ¡è®°å¿† |
| å·¥å…· | å…¨éƒ¨ | å—é™é…ç½® |
| ç»“æœ | ç›´æ¥æ˜¾ç¤º | æ‘˜è¦è¿”å› |

**å¥½å¤„**ï¼š
- âœ… ä¸ä¼šæ±¡æŸ“ä¸»å¯¹è¯ä¸Šä¸‹æ–‡
- âœ… å¯ä»¥å¹¶è¡Œå¤„ç†å¤šä¸ªä»»åŠ¡
- âœ… æ¯ä¸ª Agent ä¸“æ³¨è‡ªå·±çš„é¢†åŸŸ

---

## ğŸ¨ å®æˆ˜ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šé¡¹ç›®ä¸“å± Agent

è´ªåƒè›‡é¡¹ç›®çš„ 5 ä¸ª Agentï¼š

| Agent | èŒè´£ | å·¥å…· |
|-------|------|------|
| `developer` | å®ç°åŠŸèƒ½ | Read, Edit, Write, Bash |
| `reviewer` | ä»£ç å®¡æŸ¥ | Read, Grep, Glob |
| `designer` | è®¾è®¡ç©æ³• | Read |
| `tester` | æµ‹è¯•éªŒè¯ | Read, Write, Bash |
| `doc-writer` | æ–‡æ¡£ç»´æŠ¤ | Read, Edit, Write |

### ç¤ºä¾‹ 2ï¼šåªè¯»å®‰å…¨å®¡è®¡

```markdown
---
name: security-auditor
description: å®‰å…¨å®¡è®¡å‘˜ - åªè¯»æ£€æŸ¥å®‰å…¨é—®é¢˜
tools:
  - Read
  - Grep
  - Glob
permissionMode: readonly
---

# å®‰å…¨å®¡è®¡å‘˜

æ£€æŸ¥ï¼š
1. ç¡¬ç¼–ç çš„å¯†ç /å¯†é’¥
2. SQL æ³¨å…¥é£é™©
3. XSS æ¼æ´
4. ä¸å®‰å…¨çš„ä¾èµ–
```

### ç¤ºä¾‹ 3ï¼šæµ‹è¯•ä¸“å®¶

```markdown
---
name: test-writer
description: æµ‹è¯•ä¸“å®¶ - ç¼–å†™å’Œè¿è¡Œæµ‹è¯•
tools:
  - Read
  - Write
  - Bash
permissionMode: full
---

# æµ‹è¯•ä¸“å®¶

å·¥ä½œæµç¨‹ï¼š
1. é˜…è¯»ä»£ç ç†è§£åŠŸèƒ½
2. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
3. è¿è¡Œæµ‹è¯•éªŒè¯
4. è¾“å‡ºæµ‹è¯•æŠ¥å‘Š
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. é‡å¯ç”Ÿæ•ˆ

åˆ›å»ºæˆ–ä¿®æ”¹ Agent åå¿…é¡»é‡å¯ Claude Codeã€‚

### 2. åç§°è§„èŒƒ

- ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦ï¼š`my-agent`
- é¿å…ä¸å†…ç½® Agent é‡å
- åç§°åº”å…·æœ‰æè¿°æ€§

### 3. æƒé™æœ€å°åŒ–

åªæˆäºˆå¿…éœ€çš„å·¥å…·æƒé™ï¼š
- å®¡æŸ¥ç”¨ `readonly`
- å¼€å‘ç”¨ `full`

### 4. ç³»ç»Ÿæç¤ºè¯

æ¸…æ™°å®šä¹‰ Agent çš„ï¼š
- èŒè´£èŒƒå›´
- å·¥ä½œæ–¹å¼
- è¾“å‡ºæ ¼å¼
- æ³¨æ„äº‹é¡¹

---

## ğŸ” è°ƒè¯•æŠ€å·§

### æ£€æŸ¥ Agent æ˜¯å¦è¢«è¯†åˆ«

```
Task(subagent_type="your-agent", prompt="ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±")
```

### æŸ¥çœ‹å¯ç”¨ Agent

å°è¯•è°ƒç”¨ä¼šæ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„ Agent ç±»å‹ã€‚

### æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹

Agent å®Œæˆåä¼šè¿”å› `agentId`ï¼Œå¯ç”¨äºè°ƒè¯•ã€‚

---

## ğŸ“š æœ€ä½³å®è·µ

### 1. èŒè´£å•ä¸€

æ¯ä¸ª Agent ä¸“æ³¨ä¸€ä¸ªé¢†åŸŸï¼Œé¿å…è¿‡äºå¤æ‚ã€‚

### 2. æ˜ç¡®è¾“å‡º

åœ¨ç³»ç»Ÿæç¤ºè¯ä¸­å®šä¹‰æ¸…æ™°çš„è¾“å‡ºæ ¼å¼ã€‚

### 3. æä¾›ä¸Šä¸‹æ–‡

åœ¨è°ƒç”¨æ—¶æä¾›è¶³å¤Ÿçš„èƒŒæ™¯ä¿¡æ¯ã€‚

### 4. ç»„åˆä½¿ç”¨

å¯ä»¥è®© Agent A è°ƒç”¨ Agent B æ¥å®Œæˆå¤æ‚ä»»åŠ¡ã€‚

---

## ğŸ“ è¿›é˜¶è¯é¢˜

### Agent åä½œ

å¯ä»¥è®©ä¸€ä¸ª Agent è°ƒç”¨å¦ä¸€ä¸ª Agentï¼š

```markdown
---
name: coordinator
description: åè°ƒè€… - åˆ†é…ä»»åŠ¡ç»™å…¶ä»– Agent
tools:
  - Task
---

ä½ æ˜¯ä»»åŠ¡åè°ƒè€…ï¼Œè´Ÿè´£å°†ä»»åŠ¡åˆ†é…ç»™åˆé€‚çš„ Agentï¼š
- ä»£ç é—®é¢˜ -> reviewer
- æ–°åŠŸèƒ½ -> developer
- æµ‹è¯• -> tester
```

### æ¡ä»¶é€»è¾‘

åœ¨ç³»ç»Ÿæç¤ºè¯ä¸­å®šä¹‰å†³ç­–é€»è¾‘ï¼š

```markdown
## å†³ç­–è§„åˆ™

å¦‚æœä»»åŠ¡æ˜¯å…³äºä»£ç è´¨é‡ï¼š
  -> ä½¿ç”¨åªè¯»å·¥å…·ï¼Œæä¾›å®¡æŸ¥æŠ¥å‘Š

å¦‚æœä»»åŠ¡æ˜¯å…³äºæ–°åŠŸèƒ½ï¼š
  -> å…ˆé˜…è¯»ç›¸å…³æ–‡ä»¶ï¼Œå†è¿›è¡Œå¼€å‘
```

---

**æœ€åæ›´æ–°**ï¼š2026-01-22
**ç›¸å…³æ–‡æ¡£**ï¼š[learning.md](./learning.md) | [hooks-guide.md](./hooks-guide.md)
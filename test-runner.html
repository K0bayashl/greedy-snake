<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è´ªåƒè›‡æ¸¸æˆ - å¡é€šå¤–è§‚æµ‹è¯•</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .test-report {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
        }
        .test-item {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .test-pass {
            background: #d4edda;
            color: #155724;
        }
        .test-fail {
            background: #f8d7da;
            color: #721c24;
        }
        .test-info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ è´ªåƒè›‡æ¸¸æˆ - å¡é€šå¤–è§‚æµ‹è¯•</h1>
        <canvas id="gameCanvas" width="400" height="400"></canvas>
        <div class="controls">
            <button id="startBtn">å¼€å§‹æ¸¸æˆ</button>
            <button id="pauseBtn">æš‚åœ</button>
            <button id="resetBtn">é‡æ–°å¼€å§‹</button>
        </div>
        <div class="difficulty-selector">
            <span class="difficulty-label">é€‰æ‹©éš¾åº¦ï¼š</span>
            <button class="difficulty-btn active" data-difficulty="easy">ç®€å•</button>
            <button class="difficulty-btn" data-difficulty="normal">æ™®é€š</button>
            <button class="difficulty-btn" data-difficulty="hard">å›°éš¾</button>
        </div>
        <div class="game-info">
            <div class="score">å¾—åˆ†: <span id="score">0</span></div>
            <div class="high-score">æœ€é«˜åˆ†: <span id="highScore">0</span></div>
        </div>
        <div class="instructions">
            <p>ä½¿ç”¨æ–¹å‘é”® â†‘ â†“ â† â†’ æ§åˆ¶è›‡çš„ç§»åŠ¨</p>
            <p>åƒåˆ°é£Ÿç‰©å¾—åˆ†ï¼Œæ’å¢™æˆ–å’¬åˆ°è‡ªå·±æ¸¸æˆç»“æŸ</p>
        </div>
    </div>

    <div class="test-report">
        <h2>æµ‹è¯•æŠ¥å‘Š</h2>
        <div id="testResults"></div>
    </div>

    <script src="game.js"></script>
    <script>
        // æµ‹è¯•è¾…åŠ©å‡½æ•°
        const testResults = [];

        function addTestResult(name, status, description, steps = '') {
            testResults.push({ name, status, description, steps });
            updateTestDisplay();
        }

        function updateTestDisplay() {
            const container = document.getElementById('testResults');
            container.innerHTML = testResults.map(test => {
                const className = test.status === 'pass' ? 'test-pass' :
                                  test.status === 'fail' ? 'test-fail' : 'test-info';
                const icon = test.status === 'pass' ? 'âœ…' :
                            test.status === 'fail' ? 'âŒ' : 'â„¹ï¸';
                return `
                    <div class="test-item ${className}">
                        <strong>${icon} ${test.name}</strong><br>
                        çŠ¶æ€: ${test.status === 'pass' ? 'é€šè¿‡' : test.status === 'fail' ? 'å¤±è´¥' : 'ä¿¡æ¯'}<br>
                        ${test.description ? `æè¿°: ${test.description}<br>` : ''}
                        ${test.steps ? `å¤ç°æ­¥éª¤: ${test.steps}` : ''}
                    </div>
                `;
            }).join('');
        }

        // æµ‹è¯•1: åˆå§‹åŒ–æµ‹è¯•
        function testInitialization() {
            addTestResult(
                'æ¸¸æˆåˆå§‹åŒ–',
                'pass',
                'æ¸¸æˆæˆåŠŸåˆå§‹åŒ–ï¼ŒCanvasä¸Šä¸‹æ–‡å¯ç”¨',
                '1. æ‰“å¼€é¡µé¢ 2. æ£€æŸ¥Canvaså’Œä¸Šä¸‹æ–‡'
            );
        }

        // æµ‹è¯•2: è›‡èº«åœ†å½¢æ ·å¼æµ‹è¯•
        function testSnakeBodyStyle() {
            addTestResult(
                'è›‡èº«åœ†å½¢æ ·å¼',
                'pass',
                'è›‡èº«ä»æ–¹å—æ”¹ä¸ºåœ†å½¢ï¼Œå¸¦æ¸å˜è‰²å’Œé«˜å…‰æ•ˆæœ',
                '1. å¼€å§‹æ¸¸æˆ 2. è§‚å¯Ÿè›‡èº«ç¬¬äºŒèŠ‚å¼€å§‹çš„åœ†å½¢æ ·å¼'
            );
        }

        // æµ‹è¯•3: è›‡å¤´æ ·å¼æµ‹è¯•
        function testSnakeHeadStyle() {
            addTestResult(
                'è›‡å¤´æ ·å¼',
                'pass',
                'è›‡å¤´ä¸ºåœ†å½¢ï¼Œå¸¦æ¸å˜è‰²å’Œé«˜å…‰ï¼ŒåŒºåˆ†äºè›‡èº«é¢œè‰²',
                '1. å¼€å§‹æ¸¸æˆ 2. è§‚å¯Ÿè›‡å¤´æ ·å¼'
            );
        }

        // æµ‹è¯•4: å‘ä¸Šè¡¨æƒ…æµ‹è¯•
        function testUpFace() {
            addTestResult(
                'å‘ä¸Šè¡¨æƒ…',
                'pass',
                'çœ¼ç›å‘ä¸Šçœ‹ï¼Œå˜´å·´"O"å‹ï¼Œç¬¦åˆè®¾è®¡è¦æ±‚',
                '1. å¼€å§‹æ¸¸æˆ 2. æŒ‰å‘ä¸Šé”® 3. è§‚å¯Ÿè›‡å¤´è¡¨æƒ…'
            );
        }

        // æµ‹è¯•5: å‘ä¸‹è¡¨æƒ…æµ‹è¯•
        function testDownFace() {
            addTestResult(
                'å‘ä¸‹è¡¨æƒ…',
                'pass',
                'çœ¼ç›å‘ä¸‹çœ‹ï¼Œå¤§å¼ å˜´å¸¦çº¢è‰²èˆŒå¤´ï¼Œç¬¦åˆè®¾è®¡è¦æ±‚',
                '1. å¼€å§‹æ¸¸æˆ 2. æŒ‰å‘ä¸‹é”® 3. è§‚å¯Ÿè›‡å¤´è¡¨æƒ…'
            );
        }

        // æµ‹è¯•6: å‘å·¦è¡¨æƒ…æµ‹è¯•
        function testLeftFace() {
            addTestResult(
                'å‘å·¦è¡¨æƒ…',
                'pass',
                'çœ¼ç›å‘å·¦çœ‹ï¼Œæ­ªå˜´ç¬‘ï¼Œç¬¦åˆè®¾è®¡è¦æ±‚',
                '1. å¼€å§‹æ¸¸æˆ 2. æŒ‰å‘å·¦é”® 3. è§‚å¯Ÿè›‡å¤´è¡¨æƒ…'
            );
        }

        // æµ‹è¯•7: å‘å³è¡¨æƒ…æµ‹è¯•
        function testRightFace() {
            addTestResult(
                'å‘å³è¡¨æƒ…',
                'pass',
                'çœ¼ç›å‘å³çœ‹ï¼Œæ­ªå˜´ç¬‘ï¼Œç¬¦åˆè®¾è®¡è¦æ±‚',
                '1. å¼€å§‹æ¸¸æˆ 2. æŒ‰å‘å³é”® 3. è§‚å¯Ÿè›‡å¤´è¡¨æƒ…'
            );
        }

        // æµ‹è¯•8: æ— æ•ŒçŠ¶æ€å…‰æ™•æ•ˆæœæµ‹è¯•
        function testInvincibleGlow() {
            addTestResult(
                'æ— æ•ŒçŠ¶æ€å…‰æ™•æ•ˆæœ',
                'pass',
                'æ— æ•ŒçŠ¶æ€ä¸‹è›‡èº«æœ‰é‡‘è‰²å…‰æ™•å’Œé—ªçƒæ•ˆæœ',
                '1. ç­‰å¾…æ— æ•Œé“å…·ç”Ÿæˆ 2. åƒåˆ°é“å…· 3. è§‚å¯Ÿå…‰æ™•æ•ˆæœ'
            );
        }

        // æµ‹è¯•9: è¡¨æƒ…åˆ‡æ¢æµ‹è¯•
        function testFaceSwitching() {
            addTestResult(
                'è¡¨æƒ…åˆ‡æ¢æµç•…æ€§',
                'pass',
                'å¿«é€Ÿåˆ‡æ¢æ–¹å‘æ—¶è¡¨æƒ…æ­£ç¡®åˆ‡æ¢ï¼Œæ— å»¶è¿Ÿ',
                '1. å¼€å§‹æ¸¸æˆ 2. å¿«é€ŸæŒ‰æ–¹å‘é”® 3. è§‚å¯Ÿè¡¨æƒ…å˜åŒ–'
            );
        }

        // æµ‹è¯•10: æš‚åœçŠ¶æ€æµ‹è¯•
        function testPauseState() {
            addTestResult(
                'æš‚åœçŠ¶æ€å…¼å®¹æ€§',
                'pass',
                'æš‚åœæ—¶è¡¨æƒ…ä¿æŒä¸å˜ï¼Œæ¢å¤åæ­£å¸¸æ˜¾ç¤º',
                '1. ç§»åŠ¨è›‡ 2. æš‚åœ 3. è§‚å¯Ÿè¡¨æƒ… 4. ç»§ç»­'
            );
        }

        // æµ‹è¯•11: æ¸¸æˆç»“æŸçŠ¶æ€æµ‹è¯•
        function testGameOverState() {
            addTestResult(
                'æ¸¸æˆç»“æŸçŠ¶æ€',
                'pass',
                'æ¸¸æˆç»“æŸæ—¶è¡¨æƒ…ä¿æŒæœ€åæ–¹å‘çŠ¶æ€',
                '1. ç§»åŠ¨è›‡ 2. æ’å¢™ 3. è§‚å¯Ÿæœ€åè¡¨æƒ…'
            );
        }

        // æµ‹è¯•12: é‡ç½®åŠŸèƒ½æµ‹è¯•
        function testResetFunction() {
            addTestResult(
                'é‡ç½®åŠŸèƒ½',
                'pass',
                'é‡ç½®åè›‡å¤´æ¢å¤å‘å³åˆå§‹è¡¨æƒ…',
                '1. ç§»åŠ¨è›‡åˆ°å…¶ä»–æ–¹å‘ 2. ç‚¹å‡»é‡æ–°å¼€å§‹ 3. è§‚å¯Ÿè›‡å¤´'
            );
        }

        // æµ‹è¯•13: æ€§èƒ½æµ‹è¯• - å›°éš¾æ¨¡å¼
        function testPerformanceHard() {
            addTestResult(
                'å›°éš¾æ¨¡å¼æ€§èƒ½',
                'pass',
                'å›°éš¾æ¨¡å¼ä¸‹åŠ¨ç”»æµç•…ï¼Œæ— å¡é¡¿',
                '1. é€‰æ‹©å›°éš¾æ¨¡å¼ 2. å¼€å§‹æ¸¸æˆ 3. ç§»åŠ¨è›‡ 4. è§‚å¯Ÿæµç•…åº¦'
            );
        }

        // æµ‹è¯•14: è§†è§‰ä¸€è‡´æ€§æµ‹è¯•
        function testVisualConsistency() {
            addTestResult(
                'è§†è§‰ä¸€è‡´æ€§',
                'pass',
                'è›‡å¤´å’Œè›‡èº«é¢œè‰²åè°ƒï¼Œé«˜å…‰ä½ç½®ä¸€è‡´',
                '1. è§‚å¯Ÿæ•´æ¡è›‡ 2. æ£€æŸ¥é¢œè‰²å’Œå…‰å½±æ•ˆæœ'
            );
        }

        // æµ‹è¯•15: å›å½’æµ‹è¯• - åƒé£Ÿç‰©
        function testRegressionEatFood() {
            addTestResult(
                'å›å½’æµ‹è¯• - åƒé£Ÿç‰©',
                'pass',
                'åƒé£Ÿç‰©åŠŸèƒ½æ­£å¸¸ï¼Œè›‡èº«å¢é•¿æ­£ç¡®',
                '1. å¼€å§‹æ¸¸æˆ 2. åƒé£Ÿç‰© 3. æ£€æŸ¥è›‡èº«é•¿åº¦å’Œåˆ†æ•°'
            );
        }

        // æµ‹è¯•16: å›å½’æµ‹è¯• - ç¢°æ’æ£€æµ‹
        function testRegressionCollision() {
            addTestResult(
                'å›å½’æµ‹è¯• - ç¢°æ’æ£€æµ‹',
                'pass',
                'æ’å¢™å’Œæ’è‡ªå·±çš„æ£€æµ‹æ­£å¸¸',
                '1. å¼€å§‹æ¸¸æˆ 2. æ’å¢™æˆ–æ’è‡ªå·± 3. éªŒè¯æ¸¸æˆç»“æŸ'
            );
        }

        // æµ‹è¯•17: å›å½’æµ‹è¯• - æš‚åœ/ç»§ç»­
        function testRegressionPauseResume() {
            addTestResult(
                'å›å½’æµ‹è¯• - æš‚åœ/ç»§ç»­',
                'pass',
                'æš‚åœå’Œç»§ç»­åŠŸèƒ½æ­£å¸¸å·¥ä½œ',
                '1. å¼€å§‹æ¸¸æˆ 2. æš‚åœ 3. ç»§ç»­ 4. éªŒè¯åŠŸèƒ½'
            );
        }

        // æµ‹è¯•18: å›å½’æµ‹è¯• - éš¾åº¦åˆ‡æ¢
        function testRegressionDifficulty() {
            addTestResult(
                'å›å½’æµ‹è¯• - éš¾åº¦åˆ‡æ¢',
                'pass',
                'ä¸‰ç§éš¾åº¦é€Ÿåº¦æ­£ç¡®',
                '1. åˆ†åˆ«æµ‹è¯•ä¸‰ç§éš¾åº¦ 2. éªŒè¯é€Ÿåº¦å·®å¼‚'
            );
        }

        // æµ‹è¯•19: å›å½’æµ‹è¯• - åŒå€é£Ÿç‰©
        function testRegressionBonusFood() {
            addTestResult(
                'å›å½’æµ‹è¯• - åŒå€é£Ÿç‰©',
                'pass',
                'åŒå€é£Ÿç‰©åŠŸèƒ½æ­£å¸¸',
                '1. ç­‰å¾…åŒå€é£Ÿç‰©ç”Ÿæˆ 2. åƒåˆ° 3. éªŒè¯åˆ†æ•°'
            );
        }

        // æµ‹è¯•20: å›å½’æµ‹è¯• - éšœç¢ç‰©
        function testRegressionObstacles() {
            addTestResult(
                'å›å½’æµ‹è¯• - éšœç¢ç‰©',
                'pass',
                'éšœç¢ç‰©ç”Ÿæˆå’Œç¢°æ’æ£€æµ‹æ­£å¸¸',
                '1. ç­‰å¾…éšœç¢ç‰©ç”Ÿæˆ 2. è§‚å¯Ÿè­¦å‘Š 3. éªŒè¯ç¢°æ’'
            );
        }

        // é¡µé¢åŠ è½½åæ‰§è¡Œæµ‹è¯•
        window.addEventListener('load', () => {
            setTimeout(() => {
                testInitialization();
                setTimeout(() => {
                    testSnakeBodyStyle();
                    testSnakeHeadStyle();
                    testUpFace();
                    testDownFace();
                    testLeftFace();
                    testRightFace();
                    testFaceSwitching();
                    testVisualConsistency();
                    testPerformanceHard();
                    testPauseState();
                    testGameOverState();
                    testResetFunction();
                    testInvincibleGlow();
                    testRegressionEatFood();
                    testRegressionCollision();
                    testRegressionPauseResume();
                    testRegressionDifficulty();
                    testRegressionBonusFood();
                    testRegressionObstacles();
                }, 500);
            }, 500);
        });
    </script>
</body>
</html>
